allprojects {
    ext {
        projectByName = { name ->
            for (subproject in rootProject.subprojects) {
                if (subproject.name == name) {
                    return subproject
                }
            }
            return null
        }

        internalProject = { name ->
//            if (releaseMode) {
//                "$group:$name:$version"
//            } else {
//                projectByName("$name")
//            }
            projectByName("$name")
        }

        releaseMode = (project.hasProperty('RELEASE_MODE') && project.property('RELEASE_MODE') == "true") || System.getenv('RELEASE_MODE') == "true"
        String compilerPluginVersionFromProperties = (String) project.properties["compose.kotlinCompilerPluginVersion"]
        String compilerPluginVersionFromLibrariesVersions = libs.versions.compose.kotlin.get()
        composePluginKotlinVersion = compilerPluginVersionFromProperties
        if (compilerPluginVersionFromProperties == null) {
            composePluginKotlinVersion = compilerPluginVersionFromLibrariesVersions
        }

        mppProjectWithSerializationPresetPath = "${rootProject.projectDir.absolutePath}/mppProjectWithSerialization.gradle"
        mppProjectWithSerializationAndComposePresetPath = "${rootProject.projectDir.absolutePath}/mppProjectWithSerializationAndCompose.gradle"
        mppJavaProjectPresetPath = "${rootProject.projectDir.absolutePath}/mppJavaProject.gradle"
        mppJvmJsLinuxMingwProjectPresetPath = "${rootProject.projectDir.absolutePath}/mppJvmJsLinuxMingwProject.gradle"
        mppAndroidProjectPresetPath = "${rootProject.projectDir.absolutePath}/mppAndroidProject.gradle"

        defaultAndroidSettingsPresetPath = "${rootProject.projectDir.absolutePath}/defaultAndroidSettings.gradle"

        publishGradlePath = "${rootProject.projectDir.absolutePath}/publish.gradle"
        publishJvmOnlyPath = "${rootProject.projectDir.absolutePath}/jvm.publish.gradle"
    }
}
